module NPlay
  class Application
    include Singleton

    attr_accessor :rand_range, :num_trades

    def run
      puts "NPlay..."

      @rand_range = 100
      @num_trades = 10

      buy_outcomes
    end

    def buy_outcomes
      mkt_client = MarketServiceClient.new
      user_client = UserServiceClient.new

      outcomes = mkt_client.outcomes
      users = user_client.users
      user = users.select {|u| u.email.eql? "jvowell@huunu.com"}.first

      outcomes.each do |o|
        client.buy_order(o.id, 500, user.id)
      end
    end
  end
end
